<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<link href="../css/mui.min.css" rel="stylesheet" />
	<link href="../css/iconfont.css" rel="stylesheet" />
	<script src="../js/mui.min.js"></script>
	<!--<link href="../css/set.css" rel="stylesheet" />-->
	<link href="../css/zixun.css" rel="stylesheet" />
</head>
<body>
<header class="mui-bar mui-bar-nav" id="hh">
	<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
	<h1 class="mui-title">选项卡切换+下拉刷新</h1>
</header>
<div class="mui-content">
	<div id="slider" class="mui-slider mui-fullscreen">
		<div id="sliderSegmentedControl" class="mui-scroll-wrapper mui-slider-indicator mui-segmented-control mui-segmented-control-inverted">
			<div class="mui-scroll">
				<a class="mui-control-item mui-active" href="#item1mobile">
					推荐
				</a>
				<a class="mui-control-item" href="#item2mobile">
					热点
				</a>
				<a class="mui-control-item" href="#item3mobile">
					北京
				</a>
				<a class="mui-control-item" href="#item4mobile">
					社会
				</a>
				<a class="mui-control-item" href="#item5mobile">
					娱乐
				</a>
				<a class="mui-control-item" href="#item6mobile">
					科技
				</a>
			</div>
		</div>
		<div class="mui-slider-group">
			<div id="item1mobile" class="mui-slider-item mui-control-content mui-active">
				<div id="scroll1" class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<ul class="mui-table-view">
						    <li class="mui-table-view-cell mui-media">
						        <div href="javascript:;" class="zixun_a">
						            <img class="mui-media-object mui-pull-left" src="../img/index1.png" style="width: 130px;">
						            <div class="mui-media-body">
						                <div style="margin-top: 5px;">为什么叫房东,而不是房西</div>
						                <p class="mui-ellipsis" style="margin-top: 3px;">每日一读&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;04月11日</p>
						            </div>
						        </div>
						    </li>
						    <li class="mui-table-view-cell mui-media">
						        <a href="javascript:;">
						            <img class="mui-media-object mui-pull-left" src="http://placehold.it/40x30">
						            <div class="mui-media-body">
						                木屋
						                <p class="mui-ellipsis">想要这样一间小木屋，夏天挫冰吃瓜，冬天围炉取暖.</p>
						            </div>
						        </a>
						    </li>
						    <li class="mui-table-view-cell mui-media">
						        <a href="javascript:;">
						            <img class="mui-media-object mui-pull-left" src="http://placehold.it/40x30">
						            <div class="mui-media-body">
						                CBD
						                <p class="mui-ellipsis">烤炉模式的城，到黄昏，如同打翻的调色盘一般.</p>
						            </div>
						        </a>
						    </li>
						</ul>
					</div>
				</div>
			</div>
			<div id="item2mobile" class="mui-slider-item mui-control-content">
				<div class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<ul class="mui-table-view">
							<li class="mui-table-view-cell">
								第2个选项卡子项-1
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-2
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-3
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-4
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-5
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-6
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-7
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-8
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-9
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-10
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-11
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-12
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-13
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-14
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-15
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-16
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-17
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-18
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-19
							</li>
							<li class="mui-table-view-cell">
								第2个选项卡子项-20
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div id="item3mobile" class="mui-slider-item mui-control-content">
				<div class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<ul class="mui-table-view">
							<li class="mui-table-view-cell">
								第3个选项卡子项-1
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-2
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-3
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-4
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-5
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-6
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-7
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-8
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-9
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-10
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-11
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-12
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-13
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-14
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-15
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-16
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-17
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-18
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-19
							</li>
							<li class="mui-table-view-cell">
								第3个选项卡子项-20
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div id="item4mobile" class="mui-slider-item mui-control-content">
				<div class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<ul class="mui-table-view">
							<li class="mui-table-view-cell">
								第4个选项卡子项-1
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-2
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-3
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-4
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-5
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-6
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-7
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-8
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-9
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-10
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-11
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-12
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-13
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-14
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-15
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-16
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-17
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-18
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-19
							</li>
							<li class="mui-table-view-cell">
								第4个选项卡子项-20
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div id="item5mobile" class="mui-slider-item mui-control-content">
				<div class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<ul class="mui-table-view">
							<li class="mui-table-view-cell">
								第5个选项卡子项-1
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-2
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-3
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-4
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-5
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-6
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-7
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-8
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-9
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-10
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-11
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-12
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-13
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-14
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-15
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-16
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-17
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-18
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-19
							</li>
							<li class="mui-table-view-cell">
								第5个选项卡子项-20
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div id="item6mobile" class="mui-slider-item mui-control-content">
				<div class="mui-scroll-wrapper">
					<div class="mui-scroll">
						<ul class="mui-table-view">
							<li class="mui-table-view-cell">
								第6个选项卡子项-1
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-2
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-3
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-4
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-5
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-6
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-7
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-8
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-9
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-10
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-11
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-12
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-13
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-14
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-15
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-16
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-17
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-18
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-19
							</li>
							<li class="mui-table-view-cell">
								第6个选项卡子项-20
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!--*************************************************************************-->
<script src="../js/mui.pullToRefresh.js"></script>
<script src="../js/mui.pullToRefresh.material.js"></script>
<script>
	mui.init();
	(function($) {
		//阻尼系数
		var deceleration = mui.os.ios?0.003:0.0009;
		$('.mui-scroll-wrapper').scroll({
			bounce: false,
			indicators: true, //是否显示滚动条
			deceleration:deceleration
		});
		$.ready(function() {
			//循环初始化所有下拉刷新，上拉加载。
			$.each(document.querySelectorAll('.mui-slider-group .mui-scroll'), function(index, pullRefreshEl) {
				$(pullRefreshEl).pullToRefresh({
					down: {
						callback: function() {
							var self = this;
							setTimeout(function() {
								var ul = self.element.querySelector('.mui-table-view');
								ul.insertBefore(createFragment(ul, index, 10, true), ul.firstChild);
								self.endPullDownToRefresh();
							}, 1000);
						}
					},
					up: {
						callback: function() {
							var self = this;
							setTimeout(function() {
								var ul = self.element.querySelector('.mui-table-view');
								ul.appendChild(createFragment(ul, index, 5));
								self.endPullUpToRefresh();
							}, 1000);
						}
					}
				});
			});
			var createFragment = function(ul, index, count, reverse) {
				var length = ul.querySelectorAll('li').length;
				var fragment = document.createDocumentFragment();
				var li;
				for (var i = 0; i < count; i++) {
					li = document.createElement('li');
					li.className = 'mui-table-view-cell';
					li.innerHTML = '第' + (index + 1) + '个选项卡子项-' + (length + (reverse ? (count - i) : (i + 1)));
					fragment.appendChild(li);
				}
				return fragment;
			};
		});
	})(mui);
</script>
</body>
</html>